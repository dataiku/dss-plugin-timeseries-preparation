{
    "meta": {
        "label": "Timeseries smart interval restriction",
        "description": "Restrict a timeseries to a value interval, allowing certain deviations",
        "icon": "icon-reorder",
        "displayOrderRank": 4
    },
    "kind": "PYTHON",
    "selectableFromDataset": "input_dataset",
    "inputRoles": [
        {
            "name": "input_dataset",
            "label": "Input timeseries",
            "description": "Dataset containing your timeseries data.",
            "arity": "UNARY",
            "required": true,
            "acceptsDataset": true,
            "acceptsFolder": false
        }
    ],
    "outputRoles": [
        {
            "name": "output_dataset",
            "label": "Output timeseries",
            "description": "",
            "arity": "UNARY",
            "required": true,
            "acceptsDataset": true
        }
    ],
    "params": [
        {
            "name": "datetime_column",
            "label": "Timestamp column",
            "type": "COLUMN",
            "columnRole": "input_dataset",
            "allowedColumnTypes": ["date"],
            "mandatory": true
        },
        {
            "name": "sep",
            "label": "Threshold parameters",
            "type": "SEPARATOR"
        },
        {
            "name": "value_column",
            "label": "Value column",
            "type": "COLUMN",
            "columnRole": "input_dataset",
            "mandatory": true
        },
        {
            "name": "min_threshold",
            "label": "Minimal valid value",
            "type": "DOUBLE",
            "defaultValue": 0
        },
        {
            "name": "max_threshold",
            "label": "Maximum valid value",
            "type": "DOUBLE",
            "defaultValue": 10
        },
        {
            "name": "sep1",
            "label": "Validation parameters",
            "type": "SEPARATOR"
        },
        {
            "name": "time_unit",
            "label": "Unit",
            "type": "SELECT",
            "selectChoices": [
                { "value": "nanoseconds", "label": "Nanoseconds"},
                { "value": "microseconds", "label": "Microseconds"},
                { "value": "milliseconds", "label": "Milliseconds"},
                { "value": "seconds", "label": "Seconds"},
                { "value": "minutes", "label": "Minutes"},
                { "value": "hours", "label": "Hours"},
                { "value": "days", "label": "Days"},
                { "value": "rows", "label": "Rows"}
            ],
            "defaultValue": "rows"
        },
        {
            "name": "min_valid_values_duration_value",
            "label": "Minimal valid values duration",
            "description": "Values must be within the valid interval for more than this duration",
            "type": "DOUBLE",
            "defaultValue": 10
        },
        {
            "name": "min_deviation_duration_value",
            "label": "Minimum deviation duration",
            "description": "Exiting the valid interval for less than this duration is ignored.",
            "type": "DOUBLE",
            "defaultValue": 2
        },
        {
            "name": "sep3",
            "label": "Partitioning",
            "type": "SEPARATOR"
        },
        {
            "name": "advanced_activated",
            "label": "Activate partitioning",
            "description": "If the input dataset contains multiple time series indicated by a column value",
            "type": "BOOLEAN"
        },
        {
            "name": "groupby_column",
            "label": "Partitioning column",
            "type": "COLUMN",
            "columnRole": "input_dataset",
            "mandatory": false,
            "description": "",
            "visibilityCondition": "model.advanced_activated"
        }
    ]
}
