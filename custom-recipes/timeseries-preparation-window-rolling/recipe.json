{
    "meta" : {
        "label" : "2. Timeseries rolling window aggregations",
        "description" : "Compute aggregations (avg, min/max, quartiles...) of your timeseries along a rolling timeframe (window).",
        "icon" : "icon-repeat"
    },
    "kind" : "PYTHON",
    "selectableFromDataset" : "input_dataset",
    "inputRoles" : [
        {
            "name": "input_dataset",
            "label": "Input timeseries",
            "description": "Dataset containing your timeseries data.",
            "arity": "UNARY",
            "required": true,
            "acceptsDataset": true,
            "acceptsFolder": false
        }
    ],
    "outputRoles" : [
        {
            "name": "output_dataset",
            "label": "Output dataset",
            "description": "",
            "arity": "UNARY",
            "required": true,
            "acceptsDataset": true
        }
    ],
    "params": [
        {
            "name": "datetime_column",
            "label" : "Timestamp column",
            "type": "COLUMN",
            "columnRole":"input_dataset",
            "mandatory": true
        },
        {
            "name": "sep1",
            "label": "Window parameters",
            "type": "SEPARATOR"
        },
        {
            "name" : "window_unit",
            "label" : "Unit",
            "type" : "SELECT",
            "selectChoices" : [
                    { "value" : "nanosecond", "label" : "Nanosecond"},
                    { "value" : "microsecond", "label" : "Microsecond"},
                    { "value" : "millisecond", "label" : "Millisecond"},
                    { "value" : "second", "label" : "Second"},
                    { "value" : "minute", "label" : "Minute"},
                    { "value" : "hour", "label" : "Hour"},
                    { "value" : "day", "label" : "Day"},
                    { "value" : "week", "label" : "Week"},
                    { "value" : "month", "label" : "Month"},
                    { "value" : "year", "label" : "Year"},
                    { "value" : "row", "label" : "Rows"}
            ],
            "defaultValue": "row"
        },
        {
            "name": "window_width",
            "label" : "Width",
            "type": "DOUBLE",
            "defaultValue" : 10
        },
        {
            "name" : "window_type",
            "label" : "Type",
            "type" : "SELECT",
            "selectChoices" : [
                    { "value" : "triang", "label" : "Triangle"},
                    { "value" : "blackman", "label" : "Blackman"},
                    { "value" : "hamming", "label" : "Hamming"},
                    { "value" : "barlett", "label" : "Barlett"},
                    { "value" : "parzan", "label" : "Parzan"},
                    { "value" : "gaussian", "label" : "Gaussian"},
                    { "value" : "none", "label" : "Flat"}
            ],
            "defaultValue": "none"
        },
        {
            "name": "gaussian_std",
            "label" : "Gaussian standard deviation",
            "type": "DOUBLE",
            "default_value": 1.0,
            "visibilityCondition": "model.window_type == 'gaussian'"

        },
        {
            "name" : "closed_option",
            "label" : "Include window boundaries?",
            "description": "Includes the sides of the window to compute aggregations.",
            "type" : "SELECT",
            "selectChoices" : [
                    { "value" : "left", "label" : "Yes, left only"},
                    { "value" : "right", "label" : "Yes, right only"},
                    { "value" : "both", "label" : "Yes, both"},
                    { "value" : "neither", "label" : "No"}
                ],
            "defaultValue": "left"
        },
        {
            "name": "sep3",
            "label": "Partitioning",
            "type": "SEPARATOR"
        },
        {
            "name": "advance_activate",
            "label": "Timeseries values are folded",
            "description": "Activate if you use a single column for the values of multiple timeseries.",
            "type": "BOOLEAN"
        },
        {
            "name": "groupby_cols",
            "label" : "Partitioning column",
            "type": "COLUMN",
            "columnRole":"input_dataset",
            "mandatory" : false,
            "description": "Treats each value of this column as a series identifier.",
            "visibilityCondition": "model.advance_activate"

        }
    ]
}
